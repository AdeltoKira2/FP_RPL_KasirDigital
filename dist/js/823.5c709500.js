"use strict";(self["webpackChunkKasir_DigitalOnline"]=self["webpackChunkKasir_DigitalOnline"]||[]).push([[823],{7823:function(a,l,e){e.r(l),e.d(l,{default:function(){return T}});var t=e(3396),n=e(7139);const m=(0,t._)("strong",null,"Transaksi",-1),r=(0,t._)("span",null,"ID Transaksi (Tekan Sebelum Memulai Transaksi Baru)",-1),s={class:"flexbt1"},u=(0,t._)("span",{id:"idT"},"null",-1),d=(0,t._)("hr",null,null,-1),o=(0,t._)("hr",null,null,-1),i={class:"flexbt"},g=(0,t._)("strong",null,"Total Harga",-1),c=(0,t._)("br",null,null,-1),f=(0,t._)("hr",null,null,-1),b={class:"flexbt"};function w(a,l,e,w,_,h){const k=(0,t.up)("CCardHeader"),W=(0,t.up)("CButton"),y=(0,t.up)("CTableHeaderCell"),B=(0,t.up)("CTableRow"),p=(0,t.up)("CTableHead"),T=(0,t.up)("CTableDataCell"),C=(0,t.up)("CTableBody"),v=(0,t.up)("CTable"),H=(0,t.up)("CFormLabel"),U=(0,t.up)("CFormInput"),I=(0,t.up)("CCol"),E=(0,t.up)("CRow"),K=(0,t.up)("CForm"),D=(0,t.up)("CCardBody"),J=(0,t.up)("CCard");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(J,{class:"mb-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[m])),_:1}),(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[r,(0,t._)("div",s,[u,(0,t.Wm)(W,{class:"marginpx",size:"sm",color:"primary",onClick:h.addT},{default:(0,t.w5)((()=>[(0,t.Uk)("Transaksi Baru")])),_:1},8,["onClick"])]),d,(0,t.Wm)(v,{color:"dark",borderless:"",id:"printThis"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(B,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,{scope:"col"},{default:(0,t.w5)((()=>[(0,t.Uk)("Nama Barang")])),_:1}),(0,t.Wm)(y,{scope:"col"},{default:(0,t.w5)((()=>[(0,t.Uk)("Jumlah")])),_:1}),(0,t.Wm)(y,{scope:"col"},{default:(0,t.w5)((()=>[(0,t.Uk)("Harga")])),_:1})])),_:1})])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)({dataT:_.dataT},(a=>((0,t.wg)(),(0,t.j4)(C,{key:a.id},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.namaBarang,((l,e)=>((0,t.wg)(),(0,t.j4)(B,{key:e},{default:(0,t.w5)((()=>[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(l),1)])),_:2},1024),(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.qty[e]),1)])),_:2},1024),(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.hargaBarang[e]),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1}),(0,t.Wm)(K,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,{class:"mb-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{for:"idbarang",class:"col-sm-2 col-form-label-sm"},{default:(0,t.w5)((()=>[(0,t.Uk)(" ID Barang ")])),_:1}),(0,t.Wm)(I,{sm:10},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{placeholder:"ID Barang",id:"idbarang",modelValue:a.idb,"onUpdate:modelValue":l[0]||(l[0]=l=>a.idb=l),onChange:l[1]||(l[1]=a=>h.getBarang(a))},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.Wm)(E,{class:"mb-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{for:"nmbarang",class:"col-sm-2 col-form-label-sm"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Nama Barang ")])),_:1}),(0,t.Wm)(I,{sm:10},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{placeholder:"Nama Barang",id:"nmbarang1"})])),_:1})])),_:1}),(0,t.Wm)(E,{class:"mb-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{for:"jml",class:"col-sm-2 col-form-label-sm"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Jumlah ")])),_:1}),(0,t.Wm)(I,{sm:10},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{placeholder:"Jumlah",id:"jml"})])),_:1})])),_:1}),(0,t.Wm)(E,{class:"mb-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{for:"hgbarang",class:"col-sm-2 col-form-label-sm"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Harga Barang ")])),_:1}),(0,t.Wm)(I,{sm:10},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{placeholder:"Harga Barang",id:"hgbarang1"})])),_:1})])),_:1}),o,(0,t._)("div",i,[(0,t.Wm)(W,{class:"marginl",color:"dark",onClick:h.addItem},{default:(0,t.w5)((()=>[(0,t.Uk)("Tambahkan")])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(J,{class:"mb-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[g])),_:1}),(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(K,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,{class:"mb-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{for:"total",class:"col-sm-2 col-form-label-sm"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Total Harga ")])),_:1}),(0,t.Wm)(I,{sm:10},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{placeholder:"Total Harga",id:"total",disabled:""})])),_:1})])),_:1}),(0,t.Wm)(E,{class:"mb-3"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{for:"bayar",class:"col-sm-2 col-form-label-sm"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Uang yang Dibayarkan ")])),_:1}),(0,t.Wm)(I,{sm:10},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{placeholder:"Uang yang Dibayarkan",id:"bayar"})])),_:1})])),_:1}),(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Wm)(H,{for:"kembalian",class:"col-sm-2 col-form-label-sm"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Kembalian ")])),_:1}),(0,t.Wm)(I,{sm:10},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{placeholder:"Kembalian",id:"kembalian",disabled:""})])),_:1})])),_:1}),c,f,(0,t._)("div",b,[(0,t.Wm)(W,{class:"marginl",color:"dark",onClick:h.selesai},{default:(0,t.w5)((()=>[(0,t.Uk)("Selesaikan")])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1})],64)}var _=e(36),h=e(2239);const k=(0,_.ad)(h["default"]);let W=(0,_.qs)(k);var y={name:"Transaksi",data(){return{dataT:"",dataB:"",idT:"6HyxZ3nm9i0e9UpcR89F",totalHarga:0,uangBayar:0,uangKembali:0,latestStok:0}},methods:{async getBarang(a){try{const l=await(0,_.QT)((0,_.JU)(k,"barang",a.target.value)),e=l.data();document.getElementById("nmbarang1").value=e.namaBarang,document.getElementById("hgbarang1").value=e.harga,this.latestStok=e.stok}catch(l){alert(l.message)}},async addT(){try{const a=await(0,_.ET)((0,_.hJ)(k,"transaksi"),{namaBarang:[],hargaBarang:[],qty:[],totalHarga:0,uangBayar:0,uangKembali:0,timesamp:(0,_.Bt)()});this.idT=a.id,(0,_.cf)((0,_.JU)(k,"transaksi",this.idT),(a=>{this.dataT=a.data()})),document.getElementById("idT").innerHTML=a.id,document.getElementById("total").value="",this.totalHarga=0}catch(a){alert(a.message)}},async addItem(){try{const a=document.getElementById("nmbarang1").value,l=document.getElementById("hgbarang1").value,e=document.getElementById("jml").value,t=document.getElementById("idbarang").value,n=this.latestStok-e;this.totalHarga=this.totalHarga+l*e,await(0,_.r7)((0,_.JU)(k,"transaksi",this.idT),{namaBarang:(0,_.vr)(a),hargaBarang:(0,_.vr)(l),qty:(0,_.vr)(e),totalHarga:this.totalHarga}),W.update((0,_.JU)(k,"barang",t),{stok:n}),document.getElementById("idbarang").value="",document.getElementById("nmbarang1").value="",document.getElementById("hgbarang1").value="",document.getElementById("jml").value="",document.getElementById("total").value=this.totalHarga}catch(a){alert(a.message)}},async selesai(){try{this.uangBayar=document.getElementById("bayar").value,this.uangKembali=this.uangBayar-this.totalHarga,await(0,_.r7)((0,_.JU)(k,"transaksi",this.idT),{totalHarga:this.totalHarga,uangBayar:this.uangBayar,uangKembali:this.uangKembali}),document.getElementById("kembalian").value=this.uangKembali,W.commit(),W=(0,_.qs)(k),alert("Transaksi Berhasil")}catch(a){alert(a.message)}}}},B=e(89);const p=(0,B.Z)(y,[["render",w]]);var T=p}}]);
//# sourceMappingURL=823.5c709500.js.map